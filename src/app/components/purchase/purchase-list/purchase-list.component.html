<h1 style="text-align: center;">Vásárlások</h1>
<!-- Filter panel -->
<div class="mt-3" *ngIf="filter">
    <div class="card col-12">
        <div class="card-body">
            <form #form="ngForm" class="mb-3" (ngSubmit)="listpurchase()" autocomplete="off">
                <div class="row">

                    <!-- Id -->
                    <div class="col-12 col-md-3 mb-3">
                        <div class="form-group">
                            <label for="id">Azonosító</label>
                            <input type="number" pInputText name="id" [(ngModel)]="filter.id" class="form-control">
                        </div>
                    </div>

                    <!-- date -->
                    <div class="col-12 col-md-3 mb-3">
                        <div class="form-group">
                            <label for="date">Dátum</label>
                            <input type="date" pInputText name="date" [(ngModel)]="filter.date" class="form-control">
                        </div>
                    </div>

                    <!-- purchaseAmount -->
                    <div class="col-12 col-md-3 mb-3">
                        <div class="form-group">
                            <label for="purchaseAmount">Vásárlási összeg</label>
                            <input type="number" pInputText name="purchaseAmount" [(ngModel)]="filter.purchaseAmount"
                                class="form-control">
                        </div>
                    </div>

                </div>

                <div class="row">

                    <!-- Id -->
                    <div class="col-12 col-md-3 mb-3">
                        <div class="form-group">
                            <label for="cashRegisterId">Pénztárgép azonosító</label>
                            <input type="number" pInputText name="cashRegisterId" [(ngModel)]="filter.cashRegisterId"
                                class="form-control">
                        </div>
                    </div>


                    <!-- Partner ID -->
                    <div class="col-12 col-md-3 mb-3">
                        <div class="form-group">
                            <label for="partnerID">Partner azonosító</label>
                            <input type="number" pInputText name="partnerID" [(ngModel)]="filter.partnerId"
                                class="form-control">
                        </div>
                    </div>

                    <!-- shopName -->
                    <div class="col-12 col-md-3 mb-3">
                        <div class="form-group">
                            <label for="shopName">Bolt név</label>
                            <input type="text" pInputText name="shopName" [(ngModel)]="filter.shopName"
                                class="form-control">
                        </div>
                    </div>

                </div>

                <div class="row">
                    <!-- Buttons -->
                    <div class="col-12 col-md-6 mb-3 ">
                        <div>
                            <p-button type="submit">Szűrés</p-button>
                            <p-button class="mx-2" type="button" (click)="resetFilters()">Szűrés visszavonása</p-button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<!-- purchase list table -->

<p-button type="button" styleClass="p-button-success mt-2" (click)="exportToCSV()"><i class="fa fa-download mx-2"></i>
    Export</p-button>
<p-button type="button" styleClass="p-button-success mx-2 mt-2" (click)="openCreateDialog()"> <i
        class="fa fa-plus mx-2"></i> Új Vásárlás</p-button>

<div class="mt-3">
    <p-table #shopTable [value]="purchases" [paginator]="true" [rows]="5" [showCurrentPageReport]="true"
        [tableStyle]="{ 'min-width': '25rem'  }" currentPageReportTemplate="Összesen : {totalRecords}"
        [rowsPerPageOptions]="[5, 10, 25, 50]" styleClass="p-datatable-gridlines">



        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="id">Azonosító <p-sortIcon field="id"></p-sortIcon></th>
                <th pSortableColumn="date">Dátum <p-sortIcon field="name"></p-sortIcon></th>
                <th pSortableColumn="purchaseAmount">Vásárlás összeg <p-sortIcon field="partnerId"></p-sortIcon></th>
                <th pSortableColumn="cashRegisterId">Pénztárgép azonosító <p-sortIcon field="partnerId"></p-sortIcon></th>
                <th pSortableColumn="partnerID">Partner azonosító <p-sortIcon field="partnerID"></p-sortIcon></th>
                <th pSortableColumn="shopName">Bolt neve<p-sortIcon field="partnerId"></p-sortIcon></th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.date | date:"yyyy.MM.dd hh:mm:ss"}}</td>
                <td>{{ item.purchaseAmount }}</td>
                <td>{{ item.cashRegisterId }}</td>
                <td>{{ item.partnerId }}</td>
                <td>{{ item.shopName }}</td>
                <td style="text-align: right;" width="10">
                    <i class="fa fa-pencil fa-lg text-info" (click)="openEditDialog(item.id)"></i>
                    <i class="fa fa-eye fa-lg text-success"  [routerLink]="['/purchase', item.id]"></i>
                </td>
               
            </tr>
        </ng-template>


    </p-table>
    
</div>